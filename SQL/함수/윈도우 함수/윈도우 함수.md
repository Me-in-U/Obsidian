## ✅ 윈도우 함수(WINDOW FUNCTION)란?

- 윈도우 함수(Window Function)는 **기존의 그룹 함수(집계 함수, Aggregate Function)와 다르게 행(row)별로 연산 결과를 반환**하는 함수입니다.  
- 즉, `GROUP BY`를 사용하면 한 줄의 결과만 나오지만, **윈도우 함수는 각 행을 유지하면서 집계 값을 계산할 수 있습니다.**

## **1️⃣ 윈도우 함수의 특징**

- 개별 행을 **그룹화하지 않고도** 집계 결과를 함께 조회 가능.
- `OVER()` 절을 사용하여 **전체 데이터(`()`), 특정 그룹(`PARTITION BY`), 정렬 순서(`ORDER BY`)** 등을 지정할 수 있음.
- `SELECT` 절에서만 사용 가능하며, `WHERE`, `GROUP BY`에서는 사용 불가.

---

## **2️⃣ 윈도우 함수 기본 문법**

```sql
윈도우_함수(컬럼명) OVER (
    PARTITION BY 그룹기준컬럼
    ORDER BY 정렬기준컬럼
    ROWS BETWEEN 범위지정
)
```

| 키워드            | 설명                                           |
| -------------- | -------------------------------------------- |
| `윈도우_함수(컬럼)`   | 사용할 윈도우 함수 (예: `AVG()`, `SUM()`, `RANK()` 등) |
| `PARTITION BY` | 데이터를 그룹화하는 기준 (생략 가능)                        |
| `ORDER BY`     | 계산 순서를 지정 (순위 함수에서 필수)                       |
| `ROWS BETWEEN` | 특정 행 범위를 지정 (생략 가능)                          |

## **4️⃣ 윈도우 함수 vs 그룹 함수(`GROUP BY`) 차이**

| 비교 항목             | 윈도우 함수 (`WINDOW FUNCTION`)               | 그룹 함수 (`GROUP BY`)            |
| ----------------- | ---------------------------------------- | ----------------------------- |
| **출력 행 개수**       | 원래 행 개수 유지                               | 그룹별 1개의 행으로 요약                |
| **행 단위 연산 가능 여부** | 개별 행에서도 결과 계산 가능                         | 그룹별 하나의 결과만 반환                |
| **사용 가능 위치**      | `SELECT` 절에서 사용 가능                       | `SELECT`, `HAVING` 절에서 사용     |
| **예제**            | `AVG(GNP) OVER (PARTITION BY Continent)` | `AVG(GNP) GROUP BY Continent` |

✅ **즉, 윈도우 함수는 그룹핑 없이도 행 개수를 유지하며 집계 연산을 수행할 수 있음!** 🚀

---

## **5️⃣ 윈도우 함수 활용 시기**

✔ **그룹핑 없이 개별 행에서도 집계 값을 보고 싶을 때**  
✔ **순위를 매기거나 이동 평균, 이전/다음 행을 참조할 때**  
✔ **그룹 함수(`GROUP BY`)를 사용하면 원하는 데이터가 사라지는 경우**